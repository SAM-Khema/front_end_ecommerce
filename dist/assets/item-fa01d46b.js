import{_,c as f,o as n,a,b as e,s as m,v as h,u as y,e as p,f as g,t as d,q as b}from"./index-3311d7a4.js";import{i as r}from"./item-fb1847cb.js";const x={data(){return{categories:[],items:[],name:"",categoryId:"",desc:"",formatLable:"Add new",isonEdit:!1}},methods:{async onSubmit(l){l.preventDefault();const{id:i,name:c,desc:u,categoryId:s}=this;let o;if(this.isonEdit?this.isonEdit&&(o=await r.update({id:i,name:c,desc:u,category:s}),this.isonEdit=!1):o=await r.create({name:c,desc:u,category:s}),!o){alert(o.error);return}this.formatLable="Add new",this.items=await r.all(),this.name=this.desc=this.categoryId=""},updateItem(l){this.id=l._id,this.name=l.name,this.desc=l.desc,this.categoryId=l.categoryId,this.isonEdit=!0,this.formatLable="update"},cancel(){this.id="",this.name="",this.desc="",this.categoryId="",this.isonEdit=!1,this.formatLable="Add new"}},async mounted(){this.categories=await f.all(),this.items=await r.all()}},v=e("div",{class:"bg-violet-400 text-white py-2 text-lg text-center"},[e("h1",null,"Item")],-1),w={class:"py-2"},I={class:"flex flex-row py-2 px-2 space-x-2 bg-violet-200"},E=e("label",{for:"category"},"Choose a category:",-1),k=["value"],C={class:"flex gap-5"},D={type:"submit",class:"bg-blue-500 text-white p-1 px-2 rounded-md"},L={id:"customers"},S=e("tr",{class:"bg-violet-400"},[e("th",null,"Name"),e("th",null,"Image"),e("th",null,"Description"),e("th",null,"Action")],-1),V=["src"],q={class:"flex flex-col space-y-2"},A=["onClick"],N=e("button",{class:"hover:text-green-600 hover:font-bold"}," Delete ",-1);function U(l,i,c,u,s,o){return n(),a("main",null,[v,e("div",w,[e("form",{onSubmit:i[4]||(i[4]=(...t)=>o.onSubmit&&o.onSubmit(...t)),method:"post"},[e("div",I,[e("div",null,[m(e("input",{"onUpdate:modelValue":i[0]||(i[0]=t=>s.name=t),type:"text",placeholder:"Name",required:""},null,512),[[h,s.name]])]),e("div",null,[E,m(e("select",{"onUpdate:modelValue":i[1]||(i[1]=t=>s.categoryId=t),name:"category",required:"",class:"px-2 mx-2 rounded-sm bg-green-100"},[(n(!0),a(p,null,g(s.categories,t=>(n(),a("option",{key:t.name,value:t._id},d(t.name),9,k))),128))],512),[[y,s.categoryId]])]),e("div",null,[m(e("input",{"onUpdate:modelValue":i[2]||(i[2]=t=>s.desc=t),required:"",type:"text",placeholder:"Description"},null,512),[[h,s.desc]])]),e("div",C,[e("button",D,d(s.formatLable),1),s.isonEdit?(n(),a("button",{key:0,type:"submit",class:"bg-blue-500 text-white p-1 px-2 rounded-md",onClick:i[3]||(i[3]=t=>o.cancel())}," Cancel ")):b("",!0)])])],32)]),e("div",null,[e("table",L,[S,(n(!0),a(p,null,g(s.items,t=>(n(),a("tr",{key:t.name},[e("td",null,d(t.name),1),e("td",null,[e("img",{src:t.imageUrl,alt:"",style:{width:"100px",height:"100px",padding:"5px"}},null,8,V)]),e("td",null,d(t.desc),1),e("td",null,[e("div",q,[e("button",{onClick:B=>o.updateItem(t),class:"hover:text-green-600 hover:font-bold"}," Edit ",8,A),N])])]))),128))])])])}const T=_(x,[["render",U]]);export{T as default};
