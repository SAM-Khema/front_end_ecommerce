import{_ as x,p as a,c as b,o as r,a as d,b as e,s as p,v as m,u as w,e as f,f as _,t as c,q as v}from"./index-3311d7a4.js";import{i as I}from"./item-fb1847cb.js";var U={async add({price:o,source:l,product:u}){return await(await fetch("http://localhost:3001/price/create",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({price:o,source:l,product:u})})).json()}};const P={data(){return{categories:[],items:[],products:[],title:"",imageUrl:"",desc:"",categoryId:"",imageUrl:"",priceModalShown:!1,selectedProduct:null,price:"",source:"",isonEdit:!1,formatLable:"Add new"}},methods:{async onCreateProduct(o){o.preventDefault();const{id:l,title:u,desc:n,itemId:s,categoryId:i,imageUrl:h}=this;let t;if(this.isonEdit?this.isonEdit&&(t=await a.update({id:l,title:u,desc:n,item:s,category:i,imageUrl:h}),this.isonEdit=!1):t=await a.create({title:u,desc:n,item:s,category:i,imageUrl:h}),!t){alert(t.error);return}this.formatLable="Add new",this.products=await a.all(),this.title=this.desc=this.categoryId=this.itemId=this.imageUrl=""},onSelectProduct(o){this.priceModalShown=!0,this.selectedProduct=o},updateproduct(o){this.id=o._id,this.title=o.title,this.desc=o.desc,this.itemId=o.itemId,this.categoryId=o.categoryId,this.imageUrl=o.imageUrl,this.isonEdit=!0,this.formatLable="update"},cancel(){this.id="",this.name="",this.desc="",this.categoryId="",this.itemId="",this.imageUrl="",this.isonEdit=!1,this.formatLable="Add new"},async onAddPrice(o){o.preventDefault();const{price:l,source:u,selectedProduct:n}=this,s=await U.add({price:l,source:u,product:n==null?void 0:n._id});if(console.log(s),s.error){alert(s.error);return}this.products=await a.all(),this.price=this.source=this.selectedProduct=""},async deleteProduct(o){return console.log(productId),id==productId?await a.delete(productId):!1}},async mounted(){this.categories=await b.all(),this.items=await I.all(),this.products=await a.all()}},C={class:"relative",style:{width:"100%"}},S=e("div",{class:"bg-violet-400 text-white py-2 text-lg text-center"},[e("h1",null,"Products")],-1),k={class:"py-2"},E={class:"grid grid-cols-6 py-2 bg-violet-400"},A=e("label",{for:"category"},"Choose a category:",-1),L=["value"],V={class:"pr-32"},q={class:"pl-8"},D={class:"flex gap-2 pl-12"},M={type:"submit",class:"bg-blue-500 text-white p-1 rounded-md"},j={id:"customers"},T=e("tr",{class:"bg-violet-400"},[e("th",null,"Title"),e("th",null,"Prices"),e("th",null,"Category"),e("th",null,"ImageURL"),e("th",null,"Description"),e("th",null,"Action")],-1),B=["src"],N={class:"flex flex-col space-y-2"},O=["onClick"],R=e("button",{class:"hover:text-green-600 hover:font-bold"}," Delete ",-1),F={key:0,class:"flex justify-center items-center absolute top-0 left-0 bottom-0 right-0"},J={class:"w-72 h-96 bg-white rounded-lg shadow-md"},z={class:"h-full w-full flex flex-col"},G={class:"flex flex-grow-0 relative p-2 py-3"},H={class:"font-bold text-center w-full"},K={class:"w-full flex flex-grow p-2"},Q={class:"w-full flex flex-col space-y-3"},W={class:"border"},X={class:"border"},Y={class:"flex flex-grow-0 py-1 justify-center space-x-2"},Z=e("button",{type:"submit",class:"bg-blue-500 p-2 px-3 text-white rounded-md cursor-pointer"}," Add ",-1);function $(o,l,u,n,s,i){var h;return r(),d("main",C,[S,e("div",k,[e("form",{onSubmit:l[5]||(l[5]=(...t)=>i.onCreateProduct&&i.onCreateProduct(...t)),method:"post"},[e("div",E,[e("div",null,[p(e("input",{required:"","onUpdate:modelValue":l[0]||(l[0]=t=>s.title=t),type:"text",placeholder:"Title",class:"rounded-lg p-1"},null,512),[[m,s.title]])]),e("div",null,[A,p(e("select",{required:"","onUpdate:modelValue":l[1]||(l[1]=t=>s.categoryId=t),name:"category",class:"px-2 mx-2 rounded-lg bg-gray-300"},[(r(!0),d(f,null,_(s.categories,t=>(r(),d("option",{key:t.name,value:t._id},c(t.name),9,L))),128))],512),[[w,s.categoryId]])]),e("div",V,[p(e("input",{required:"","onUpdate:modelValue":l[2]||(l[2]=t=>s.imageUrl=t),type:"text",placeholder:"ImageURL",class:"rounded-lg p-1"},null,512),[[m,s.imageUrl]])]),e("div",q,[p(e("input",{required:"","onUpdate:modelValue":l[3]||(l[3]=t=>s.desc=t),type:"text",placeholder:"Description",class:"rounded-lg p-1"},null,512),[[m,s.desc]])]),e("div",D,[e("button",M,c(s.formatLable),1),s.isonEdit?(r(),d("button",{key:0,type:"submit",class:"bg-blue-500 text-white p-1 rounded-md",onClick:l[4]||(l[4]=t=>i.cancel())}," Cancel ")):v("",!0)])])],32)]),e("div",null,[e("table",j,[T,(r(!0),d(f,null,_(s.products,t=>{var y;return r(),d("tr",{key:t.name},[e("td",null,c(t.title),1),e("td",null,[e("ul",null,[(r(!0),d(f,null,_(t==null?void 0:t.prices,g=>(r(),d("li",{key:g._id},[e("span",null,c(g.price)+"$",1),e("span",null,"("+c(g.source)+")",1)]))),128))])]),e("td",null,c((y=t.category)==null?void 0:y.name),1),e("td",null,[e("img",{src:t.imageUrl,alt:"",style:{width:"100px",height:"100px",padding:"5px"}},null,8,B)]),e("td",null,c(t.desc),1),e("td",null,[e("div",N,[e("button",{class:"hover:text-green-600 hover:font-bold",onClick:g=>i.updateproduct(t)}," Edit ",8,O),R])])])}),128))])]),s.priceModalShown&&s.selectedProduct?(r(),d("div",F,[e("div",J,[e("form",{onSubmit:l[9]||(l[9]=(...t)=>i.onAddPrice&&i.onAddPrice(...t)),method:"post"},[e("div",z,[e("div",G,[e("div",H,c((h=s.selectedProduct)==null?void 0:h.title),1)]),e("div",K,[e("div",Q,[e("div",W,[p(e("input",{required:"","onUpdate:modelValue":l[6]||(l[6]=t=>s.price=t),class:"w-full h-10 px-1",type:"number",placeholder:"Price"},null,512),[[m,s.price]])]),e("div",X,[p(e("input",{required:"","onUpdate:modelValue":l[7]||(l[7]=t=>s.source=t),class:"w-full h-10 px-1",type:"text",placeholder:"Source"},null,512),[[m,s.source]])])])]),e("div",Y,[e("button",{onClick:l[8]||(l[8]=t=>s.priceModalShown=!1),class:"p-2 px-3 text-gray-500 rounded-md cursor-pointer border border-gray-100"}," Cancel "),Z])])],32)])])):v("",!0)])}const se=x(P,[["render",$]]);export{se as default};
